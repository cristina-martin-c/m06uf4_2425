<!doctype html>
<html>
<head>
	<title>Pengti</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.87.0/phaser.min.js"></script>
	<script>
let win_w=800, win_h=450;

let config = {
    type: Phaser.AUTO,
    width: win_w,
    height: win_h,
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

let game = new Phaser.Game(config);
let player1, player2;
let player1_x=32, player1_y=225;
let player2_x=768, player2_y=225;

let players_w=16, players_h=96;

let ball;
let ball_x=400, ball_y=225, ball_w=16, ball_h=16;

let ball_x_dir=1, ball_y_dir=1;

let text1;
let text2;
let points1 = 0;
let points2 = 0;
let hitR = false;
let hitL = false;

function preload ()
{
}

function create ()
{
	player1 = this.add.rectangle(player1_x, player1_y, players_w, players_h, 0xffffff);
	player2 = this.add.rectangle(player2_x, player2_y, players_w, players_h, 0xffffff);
	ball = this.add.rectangle(ball_x, ball_y, ball_w, ball_h, 0xffff00);

	key_up = this.input.keyboard.addKey('UP');
	key_down = this.input.keyboard.addKey('DOWN');
	key_left = this.input.keyboard.addKey('LEFT');
	key_right = this.input.keyboard.addKey('RIGHT');
	
	text1 = this.add.text(50,20,points1,{
		font:"40px Arial"
		});
	text2 = this.add.text(750, 20, points2,{
		font:"40px Arial"
		});	
}

function update ()
{
	ball.x += ball_x_dir;
	ball.y += ball_y_dir;

	if(ball.x > win_w || ball.x < 0)
		ball_x_dir = -ball_x_dir;

	if(ball.y > win_h || ball.y < 0)
	    ball_y_dir = -ball_y_dir;

	if (key_up.isDown){
		player1.y -= 1;
	}
	else if (key_down.isDown){
		player1.y += 1;
	}
	if (key_left.isDown){
		player1.x -= 1;
	}
	else if (key_right.isDown){
		player1.x += 1;
	}

	if (ball.x >= win_w && hitR == false)
	{
		points1 += 1;
		text1.setText(points1);
		hitR = true;
		ball.x = ball_x;
		ball.y = ball_y;
	}
	if (ball.x <= 0 && hitL == false)
	{
		points2++;
		text2.setText(points2);
		hitL = true;
		ball.x = ball_x;
		ball.y = ball_y;
	}
	if (hitR == true && ball.x <= win_w - 10)
	{
		hitR = false;
	}
	else if (hitL == true && ball.x > 10)
	{
		hitL = false;
	}
	

}	
	</script>
</head>
<body>
</body>
</html>
